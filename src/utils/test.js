!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var o=n(6),r=n(7);t.exports=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?r(t):e}},function(t,e,n){n(2);var o=n(8);function r(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,n){var r=o(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},r(e,n,i||e)}t.exports=r},function(t,e,n){var o=n(9);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=o=function(t){return n(t)}:t.exports=o=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},o(e)}t.exports=o},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var o=n(2);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}},function(t,e){function n(e,o){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,o)}t.exports=n},function(t,e,n){"use strict";n.r(e);var o,r=n(0),i=n.n(r),a=n(1),c=n.n(a),u={PRISTINE:0,PENDING:1,REJECTED:2,RESOLVED:3},f=function(){function t(){i()(this,t),this._state_=u.PRISTINE}return c()(t,[{key:"setState",value:function(t){return this._state_=t,this}},{key:"getState",value:function(){return this._state_}}]),t}(),s=n(3),l=n.n(s),p=n(2),y=n.n(p),h=n(4),d=n.n(h),m=n(5),g=n.n(m),b=function(){function t(e){i()(this,t)}return c()(t,[{key:"callDomain",value:function(t,e){if(!t)return!1}},{key:"watchDomainMessage",value:function(t){}}]),t}();function v(t){var e,n,o=document.getElementsByTagName("script");return n=(e=o[o.length-1].src).match(new RegExp("[\\?&]".concat(t,"=([^&]+)"),"i")),function(t,e){var n;if(!t)return null;t=decodeURIComponent(t).replace(/^\?/,""),n={},t.split("&").forEach(function(t){var e=t.split("=");n[e[0]]=e[1]||""}),n.hasOwnProperty(e)&&n[e]}(e,t),n?n[1]:null}function w(t){return"number"==typeof t&&t==t||(t=2),(t<=1?"":w(--t))+(Number((Math.random()+"").slice(2,10)+((new Date).getTime()+"").slice(-10)).toString(16)+"").slice(0,8)}var E=function(t){function e(){var t;return i()(this,e),t=l()(this,y()(e).call(this)),-1===navigator.userAgent.toUpperCase().indexOf("LANTUMC")&&(t.callDomain=t.noop,t.watchDomainMessage=t.noop),t.iabCallbackNs="_$mck$_"+w(),t}return g()(e,t),c()(e,[{key:"callDomain",value:function(t,n){if(!1===d()(y()(e.prototype),"callDomain",this).apply(this,arguments))return this;var o={data:{action:t.toUpperCase(),message:n,type:"IAB",iabCallbackNs:this.iabCallbackNs},origin:location.origin};return o=JSON.stringify(o),o=encodeURIComponent(o),location.href="lantumcampus://mc_sdk?data=".concat(o),this}},{key:"watchDomainMessage",value:function(t){return"function"!=typeof t?this:(window[this.iabCallbackNs]=function(e){var n=JSON.parse(decodeURI(e));t({actionFlag:n.action,message:n.message,isKeepListen:!!n.isKeepListen})},this)}},{key:"noop",value:function(){}}]),e}(b),S=function(t){function e(){return i()(this,e),l()(this,y()(e).call(this))}return g()(e,t),c()(e,[{key:"callDomain",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!1===d()(y()(e.prototype),"callDomain",this).apply(this,arguments)?this:("top"===n.target?top.postMessage({action:t.toUpperCase(),message:n,type:"IFRAME"},"*"):parent.postMessage({action:t.toUpperCase(),message:n,type:"IFRAME"},"*"),this)}},{key:"watchDomainMessage",value:function(t){return"function"!=typeof t?this:(window.addEventListener("message",function(e){var n=e.data;t({actionFlag:n.action,message:n.message,isKeepListen:!!n.isKeepListen})}),this)}}]),e}(b);n.d(e,"sdk",function(){return k});var O="undefined"!=typeof $_project?"2.0.3":"",x="MCK",_=top===window,P=top!==window;function k(){return k}!function(t,e){var n,o=new f,r=[],i=[],a=[],c=t[x],s=v("appkey");function l(t){if(t&&(s=t),!s)return alert("娌℃湁鑾峰彇鍒� appKey .\n璇锋寜鐓� https://gitee.com/lantutech/mc-sdk 鎺掓煡.");o.setState(u.PENDING),n.callDomain("auth",{appKey:s,domain:location.origin})}function p(t,e,n){var o;if("string"==typeof t&&"function"==typeof e)return o=(n=n||{}).flag||w(),r.push({once:n.once,flag:o,action:t.toUpperCase(),callback:e}),o}function y(t,e,n){return(n=n||{}).once=!0,p(t,e,n),k}_&&(n=new E),P&&(n=new S),k.version=O,k.h5={},n.watchDomainMessage(function(t){var e=t.actionFlag,n=t.message,i=t.isKeepListen;0!==r.length&&(o.getState()!==u.RESOLVED&&"AUTH_SUCCESS"!==e||function(t,e){for(var o,r=t.length;r--;)o=t[r],e===o.action&&(o.callback(n,o),o.once&&!i&&t.splice(r,1))}(r,e))}),s&&setTimeout(l,520),y("AUTH_SUCCESS",function(t){if(!t)return i.length=0,void o.setState(u.REJECTED);o.setState(u.RESOLVED)}),y("AVAILABLE_API",function(e){var n;a.length=0,a.push.apply(a,e),0!==i.length&&(n=t[x],n=k.isPrototypeOf(n)?n:Object.create(k),i.forEach(function(t){t.call(null,n)}))}),k.auth=l,k.ready=function(t,e){if("function"!=typeof t)return k;switch(o.getState()){case u.RESOLVED:t(k);break;case u.PRISTINE:case u.PENDING:i.push(t);break;default:"function"==typeof e&&e()}return k},k.h5.call=function(t,r,i){var c,f;switch(o.getState()){case u.PRISTINE:throw new Error("璇风‘璁や綘鐨� appKey 姝ｇ‘.");case u.PENDING:console.log("浠嶅湪楠岃瘉涓�.. 璇蜂娇鐢� `MCK.ready(fn)` 娉ㄥ唽鍥炶皟.");break;case u.RESOLVED:c=!0;break;default:throw new Error("璇风‘璁や綘鐨� appKey 姝ｇ‘.")}if(!c)return;if(!t||-1===a.indexOf(t.toUpperCase()))throw new Error("鏈壘鍒拌 ["+t+"] API, 璇风‘璁や綘璋冪敤鐨� API .");"function"==typeof r&&(i=r,r=e),f=t+"_!_"+w(),n.callDomain(f,r),"function"==typeof i&&k.h5.watchOnce(f,function(t){i(t)})},k.h5.watch=p,k.h5.watchOnce=y,k.h5.unWatch=function(t){var e=r.length;for(;e--;)if(t===r[e].flag){r.splice(e,1);break}return k},k.h5.getApi=function(){return a.concat()},k.conflict=function(){return t[x]=c,c=null,Object.create(k)},t[x]=Object.create(k)}(window),P&&function(){var t;if(o)t=o;else{var e=navigator.userAgent;t=-1!==e.indexOf("iPhone")||e.indexOf("iPad")}return t}()&&function(){var t;document.addEventListener("touchend",function(t){var e=t.target.tagName.toUpperCase();e&&-1!==["INPUT","TEXTAREA"].indexOf(e.toUpperCase())&&(window.focus(),t.target.focus())},!1),(t=document.createElement("style")).innerHTML="body{position: absolute!important; top: 0; left: 0; right: 0; bottom: 0; overflow-y: auto!important; -webkit-overflow-scrolling: touch!important}",document.head.appendChild(t)}()}])});
//# sourceMappingURL=mc-sdk.2.0.3.js.map